{% extends "base.html" %}
{% block content %}
<h2>Admin Dashboard</h2>
<form method="POST" action="{{ url_for('add_book') }}" class="row g-3 mb-4">
  <div class="col-md-3"><input type="text" name="title" placeholder="Title" class="form-control" required></div>
  <div class="col-md-3"><input type="text" name="author" placeholder="Author" class="form-control" required></div>
  <div class="col-md-2"><input type="text" name="category" placeholder="Category" class="form-control" required></div>
  <div class="col-md-4"><input type="text" name="file_link" placeholder="File Link" class="form-control"></div>
  <div class="col-md-12"><textarea name="description" placeholder="Description" class="form-control"></textarea></div>
  <div class="col-md-12"><button class="btn btn-success">Add Book</button></div>
</form>

<div class="row">
  {% for book in books %}
  <div class="col-md-3 mb-3">
    <div class="card h-100">
      <div class="card-body">
        <h5>{{ book.title }}</h5>
        <p>{{ book.author }}</p>
        <form method="POST" action="{{ url_for('delete_book', id=book.id) }}">
          <button class="btn btn-danger btn-sm">Delete</button>
        </form>
        <!-- Edit Modal Trigger -->
        <button class="btn btn-warning btn-sm mt-1" data-bs-toggle="modal" data-bs-target="#editModal{{book.id}}">Edit</button>
      </div>
    </div>
  </div>

  <!-- Edit Modal -->
  <div class="modal fade" id="editModal{{book.id}}" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <form method="POST" action="{{ url_for('edit_book', id=book.id) }}">
          <div class="modal-header"><h5>Edit Book</h5></div>
          <div class="modal-body">
            <input type="text" name="title" value="{{ book.title }}" class="form-control mb-2">
            <input type="text" name="author" value="{{ book.author }}" class="form-control mb-2">
            <input type="text" name="category" value="{{ book.category }}" class="form-control mb-2">
            <input type="text" name="file_link" value="{{ book.file_link }}" class="form-control mb-2">
            <textarea name="description" class="form-control">{{ book.description }}</textarea>
          </div>
          <div class="modal-footer">
            <button class="btn btn-primary">Save</button>
            <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
